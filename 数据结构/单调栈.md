# 单调栈
**定义**：维护一个栈内元素单调递增或单调递减的数据结构（具体可以为array或stack），以快速解决NGE问题。（Nest Greater Element）
**实现**：以单调递增栈为例。初始阶段栈为空，直接把待入元素入栈。对于接下来的每一个待入元素，执行以下操作：
1. 如果它大于栈顶元素，直接入栈；
2. 如果它小于栈顶元素，说明违反了单调递增性。不断将栈顶大于它的元素出栈，直到栈顶小于待入元素，再将待入元素入栈。

**板子**：
```c++
stack<int> s;
int a[n+1]; //具体情况给n赋值，下标从1开始
for(int i=1;i<=n;i++) {
    scanf("%d",&a[i]);
    if(s.empty()||a[s.top()]>=a[i]) {
        s.push(i);
    }
    else {
        while(!s.empty()&&a[s.top()]<a[i]) {
            int top=s.top();
            s.pop();
            //执行一些操作，具体问题具体分析
        }  
        s.push(i);
    }
}
```
**应用**
单调栈的意义不仅仅在维护有序数列这一结果，更在于不断入栈出栈的过程，具体体现在上述代码的while循环里。一旦有一个待入栈的数不符合单调栈既有规则，那么请注意，它很有可能是问题求解的关注点。以排队看身高一题为例，每个人往右看比自己低的人。我们维护一个单调递减栈，当一个身高比栈顶高的人待入时，不断累加之前的人能看到的人数并出栈。再以盛水和柱状图最大面积为例，盛水要求两端必须比中间高，而柱状图面积要求两端必须比中间低。结合单调递增栈，栈顶元素下面一个元素一定比它小，这时候如果再来一个比它小的，那就构成“两边夹”，即符合问题要求的一种解。
**特点**
能用单调栈解决的问题，一般都可以用多一个n量级的暴力解决。比如往右看问题，暴力就是两重for循环，复杂度为O(n^2^)；用单调栈就是一次for循环，复杂度为O(n)。因此单调栈的特点是通过栈信息的存储实现查找的高效。